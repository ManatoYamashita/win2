# GitHub Issue #22 更新コメント（下書き）

## 📊 検証完了レポート - Parameter Tracking機能の利用可否

### 検証期間
2025-10-13 〜 2025-01-09（約4週間）

---

### ✅ 検証完了項目

1. **WIN×Ⅱシステム実装**: ✅ 100%完了
   - id1パラメータ付与機能
   - eventIdパラメータ付与機能
   - Google Sheets「クリックログ」記録機能
   - 別タブでA8.netページを開く機能
   - 成功トースト表示機能
   - デバッグログ出力機能

2. **A8.net連携確認**: ✅ 正常動作
   - 過去30日間で合計9回のクリックを実施
   - A8.net日別レポートで全クリックが記録されていることを確認
   - クリックデータの詳細:
     - 2025-11-08: 2回
     - 2025-11-05: 2回
     - 2025-11-03: 1回
     - 2025-10-26: 1回
     - 2025-10-16: 1回
     - 2025-10-14: 1回
     - 2025-10-13: 1回（初回テスト）

3. **Parameter Tracking Report検証**: ❌ 失敗
   - 複数の検索条件を試したが、データが一切表示されない:
     - 期間拡大（過去1ヶ月、過去3ヶ月）
     - 特定のmemberId指定（3つのIDで試行）
     - プログラム名指定
     - すべての条件を空白にして検索
   - 3週間以上経過してもデータが表示されない

---

### ⚠️ 暫定結論

**Parameter Tracking機能は、Media Member契約では利用できない可能性が極めて高い**

#### 根拠

1. WIN×Ⅱのシステムは2025年10月13日から正常に稼働している（約4週間）
2. A8.net日別レポートでは過去30日間で9回のクリックが記録されている
3. しかし、Parameter Tracking Reportには一切データが表示されない
4. 期間拡大、memberId指定、プログラム指定など、複数の検索条件を試しても表示されない
5. 3週間以上経過してもデータが表示されない（データ反映の遅延説は否定）

#### CSV出力機能・id1カラムの確認

- ⏳ **未実施**: Parameter Tracking Reportにデータが表示されないため、CSV出力ボタンを探すことができず、id1カラムの有無も確認できない

---

### 📞 次のアクション

#### 最優先: A8.netサポートへの問い合わせ（最終確認）

**目的**: Parameter Tracking機能がMedia Member契約で利用可能か、公式見解を取得

**問い合わせ内容**: [docs/dev/a8-support-inquiry-draft.md](../dev/a8-support-inquiry-draft.md) を参照

**質問項目**:
1. メディア会員契約でパラメータ計測レポート機能は利用可能か？
2. 利用可能な場合、レポートにデータを表示させるための正しい手順は？
3. パラメータ計測レポートのデータ反映には何時間程度かかるか？
4. 利用不可の場合、会員別の成果追跡を実現する代替方法は？

**回答待ち期間**: 1-3営業日

---

#### 並行実施: 代替ASP調査

Parameter Tracking機能が利用できない場合に備えて、代替ASPの調査を開始します。

**調査対象**:
1. **もしもアフィリエイト**（最優先）
   - 会員別トラッキング機能の有無
   - パラメータ付きリンクのサポート
   - CSV出力機能

2. **バリューコマース**
   - LinkSwitch機能の会員別トラッキング可否
   - API連携の可能性

3. **AFB再実装**（技術的に確実）
   - 削除済みのAFB実装を復活（コミット `b8e9b98` で保持済み）
   - Vercel Cronの代わりにGitHub Actions Schedulerを使用
   - Webhookエンドポイントは既に実装済み（動作確認済み）
   - 実装時間: 1日（GitHub Actions設定 + コード復活）

---

### 📝 関連ドキュメント

- **検証結果詳細**: [docs/dev/a8-parameter-tracking-verification.md](../dev/a8-parameter-tracking-verification.md)
- **サポート問い合わせ下書き**: [docs/dev/a8-support-inquiry-draft.md](../dev/a8-support-inquiry-draft.md)
- **ASP統合調査結果**: [docs/asp-api-integration.md](../asp-api-integration.md)

---

### 🎯 Issue完了条件

以下のいずれかの条件を満たした時点でIssue完了とします：

#### ✅ パターンA: Parameter Tracking機能が利用可能

- A8.netサポートから「利用可能」の回答を取得
- 指示に従ってデータ表示に成功
- CSV出力機能を確認
- id1カラムの有無を確認
- 結果を `docs/dev/a8-parameter-tracking-verification.md` に記録

**次のステップ**: 運用マニュアル作成、テスト運用開始

---

#### ❌ パターンB: Parameter Tracking機能が利用不可

- A8.netサポートから「利用不可」または「Media Member契約では不可」の回答を取得
- 最終結論を `docs/dev/a8-parameter-tracking-verification.md` に記録
- A8.net運用方針を「集計レポートのみ利用」に変更

**次のステップ**: 代替ASP実装（もしもアフィリエイト、バリューコマース、またはAFB再実装）

---

### 📅 タイムライン

- **今日（2025-01-09）**: A8.netサポートへ問い合わせ送信
- **数日後**: A8.netサポートからの回答受領
- **1週間以内**: Issue #22完了（最終判定）
- **2週間以内**: 代替ASP調査完了（必要に応じて）

---

### 💡 会員別成果追跡の実現方法（現時点での推奨）

A8.netのParameter Tracking機能が利用できない場合、以下の代替案を推奨します：

1. **もしもアフィリエイト**（最優先）
   - A8.netと同等の大手ASP
   - 会員別トラッキング機能の調査が必要

2. **AFB再実装**（技術的に確実）
   - 実装済みコードを復活（数時間で完了）
   - Webhook方式で確実に動作
   - ただし、AFBアカウント登録申請が必要（過去に失敗）

3. **手動マッチング**（最終手段）
   - Google Sheets「クリックログ」とA8.net「成果レポート」を時系列でマッチング
   - 精度は低いが、一時的な運用は可能

---

**作成日**: 2025-01-09
**ステータス**: サポート回答待ち
**担当者**: [記入してください]
