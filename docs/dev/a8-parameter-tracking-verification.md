# A8.net パラメータ計測機能 実地検証ログ

**Document Status:** ⚠️ **検証完了 - 暫定結論: 利用不可の可能性が高い（サポート回答待ち）**
**Created:** 2025-01-04
**Last Updated:** 2025-01-09
**検証期間:** 2025-10-13 〜 2025-01-09（約4週間）

---

## 📊 検証結果サマリー

### 実施した検証

| 検証項目 | 結果 | 備考 |
|---------|------|------|
| WIN×Ⅱシステム実装 | ✅ 正常動作 | id1/eventIdパラメータ付与、Google Sheets記録 |
| A8.net連携確認 | ✅ 正常動作 | 過去30日で9回のクリックが日別レポートに記録 |
| Parameter Tracking Report表示 | ❌ 失敗 | 3週間以上経過してもデータが表示されない |
| CSV出力機能確認 | ⏳ 未実施 | データが表示されないため確認不可 |
| id1カラム有無確認 | ⏳ 未実施 | CSV出力できないため確認不可 |

### 暫定結論

**Parameter Tracking機能は、Media Member契約では利用できない可能性が極めて高い**

**根拠:**
1. ✅ WIN×Ⅱのシステムは2025年10月13日から稼働中（約4週間）
2. ✅ A8.net日別レポートでは過去30日間で9回のクリックが記録されている
3. ❌ しかし、Parameter Tracking Reportには一切データが表示されない
4. ❌ 期間拡大、memberId指定、プログラム指定など、複数の検索条件を試しても表示されない
5. ⏰ 3週間以上経過してもデータが表示されない（データ反映の遅延説は否定）

### 次のアクション

**最優先**: A8.netサポートへの問い合わせ（最終確認のため）
- 問い合わせ内容: `docs/dev/a8-support-inquiry-draft.md` を参照
- 送信日時: [記入してください]
- 回答待ち期間: 1-3営業日

**並行実施**: 代替ASP調査
- もしもアフィリエイト
- バリューコマース
- AFB再実装（GitHub Actions Scheduler）

**関連Issue**: GitHub Issue #22 - A8.net Parameter Tracking Report CSV検証と運用フロー確立

---

## ⚠️ 重要な発見: 過去30日間のクリック履歴

### A8.net日別レポート（新レポートB版）

**検証日**: 2025-01-09

**過去30日間のクリック数: 合計9回**

| 年月日 | クリック数 | 備考 |
|--------|----------|------|
| 2025-11-08 | 2回 | 今回の検証テスト |
| 2025-11-05 | 2回 | 過去のテスト |
| 2025-11-03 | 1回 | 過去のテスト |
| 2025-10-26 | 1回 | 10月のテスト |
| 2025-10-16 | 1回 | 10月のテスト |
| 2025-10-14 | 1回 | 10月のテスト |
| 2025-10-13 | 1回 | 初回テスト（システム稼働開始） |
| **合計** | **9回** | |

**重要な発見**:
- WIN×Ⅱのシステムは2025年10月13日から稼働している（約4週間）
- A8.net側にはクリックデータが正しく届いている
- しかし、Parameter Tracking Reportには何も表示されない
- **結論**: データ反映の遅延ではなく、機能自体が利用できない可能性

---

## 🔄 検証プロセス詳細

### Step 1: パラメータ計測機能の確認 ✅ 完了

- [x] A8.net管理画面にログイン
- [x] Parameter Tracking Reportにアクセス（`https://media-console.a8.net/report/parameter#`）
- [x] パラメータ計測機能が存在することを確認

---

### Step 2: WIN×Ⅱシステムの稼働確認 ✅ 完了

- [x] 2025年10月13日からシステム稼働開始
- [x] 過去30日間で9回のクリック実施
- [x] Google Sheets「クリックログ」に全クリックが記録されている
- [x] A8.net日別レポートでクリック数が記録されている

**Google Sheetsクリックログ（抜粋）**:
```
2025-11-08: 5回クリック（会員ID: b91765a2-..., a07ffb63-...）
2025-11-09: 1回クリック（ゲストID: guest:1ce93915-...）
（10月13日以降、定期的にテスト実施）
```

---

### Step 3: Parameter Tracking Report 検証 ❌ 失敗

**実施した検索パターン**:

#### 検索パターン1: 期間を広げる
- 期間: 2025-10-01 〜 2025-11-09（過去1ヶ月以上）
- 結果: ❌ 「指定された条件で表示できるレポートデータがありません」

#### 検索パターン2: 特定のmemberIdで検索
- パラメータ: `b91765a2-f57d-4c82-bd07-9e0436f560da`（3回クリックした会員ID）
- 結果: ❌ データ表示なし

- パラメータ: `a07ffb63-6787-4abd-8135-722238a491a9`（2回クリックした会員ID）
- 結果: ❌ データ表示なし

- パラメータ: `guest:1ce93915-cc19-47f7-ae9e-47af901726d3`（ゲストID）
- 結果: ❌ データ表示なし

#### 検索パターン3: プログラム名で検索
- プログラム: Real Face、原一探偵事務所、福ちゃん
- 結果: ❌ データ表示なし

#### 検索パターン4: すべての条件を空白にして検索
- 期間: 過去3ヶ月
- 条件: すべて空白
- 結果: ❌ データ表示なし

---

### Step 4: CSV出力機能確認 ⏳ 未実施

**実施できなかった理由**: Parameter Tracking Reportにデータが表示されないため、CSV出力ボタンを探すことができない

---

## 📋 検証目的

A8.net公式サポートページで確認できる「パラメータ計測機能」が、WIN×Ⅱプロジェクトで必要な**個別成果追跡**に使用できるかを実地検証する。

### 重要な確認事項

1. **技術的実現性:** id1パラメータ付き成果データをCSV出力できるか
3. **運用可能性:** 実務で継続的に使用できる機能か

---

## 📅 検証情報

| 項目 | 内容 |
|------|------|
| **検証開始日** | 2025-01-04 |
| **検証担当者** | [記入してください] |
| **検証環境** | A8.netメディア会員管理画面 |
| **契約種別** | メディア会員（アフィリエイター） |
| **A8.netアカウント** | ID: `ohshiro` |

---

## 🔍 検証手順

### ステップ1: パラメータ計測機能の確認

**目的:** パラメータ計測レポートの存在と設定方法を確認

**操作手順:**
1. [x] A8.net管理画面にログイン (https://pub.a8.net/a8v2/media/memberAction.do)
2. [x] トップメニューまたはレポートメニューを確認
3. [x] 「パラメータ計測」「パラメータ計測レポート」関連の項目を探す
4. [x] 見つかった場合、メニューパスを記録: (`https://media-console.a8.net/report/parameter#`)

**設定確認:**
- [x] パラメータ計測機能は有効化されていた
- [x] デフォルトで有効（設定不要）

**結果メモ:**
```
[パラメータ計測機能のマニュアル](https://support.a8.net/a8/as/faq/manual/a8-parameter-guide.php)
[A8ヘルプ - 
管理画面の使い方](https://support.a8.net/a8/as/faq/manual)



```

---

### ステップ2: テストリンクの作成と申込

**目的:** id1パラメータ付きリンクで成果が発生するか確認

**操作手順:**

**2-1. セルフバック案件の選択**
1. [ ] セルフバック可能な案件を検索
2. [ ] 選択した案件:
   - プログラム名: `_________________________`
   - プログラムID: `_________________________`
   - 報酬額: `¥_________`

**2-2. アフィリエイトリンクの生成**
1. [ ] 管理画面でアフィリエイトリンクを生成
2. [ ] 生成されたURL: `_________________________`

**2-3. id1パラメータの手動追加**
1. [ ] URLの末尾に `&id1=test_20250104_win2` を追加
2. [ ] 完成したテストURL:
```
[テストURL全体をここに貼り付け]


```

**2-4. セルフバック申込の実行**
1. [ ] 上記URLをブラウザで開く
2. [ ] セルフバック申込を完了
3. [ ] 申込完了日時: `YYYY-MM-DD HH:MM`
4. [ ] 申込完了画面のスクリーンショット: [保存場所]

**待機:**
- A8.netの成果反映には通常数時間～1営業日かかる
- 次のステップは成果が反映されてから実施

**結果メモ:**
```
[申込時の注意事項、エラー、特記事項を記録]




```

---

### ステップ3: パラメータ計測レポートの確認

**目的:** 成果データにid1パラメータが記録されているか確認

**前提条件:**
- [ ] ステップ2の申込から24時間以上経過
- [ ] 成果発生レポートで成果が表示されている

**操作手順:**

**3-1. パラメータ計測レポートを開く**
1. [ ] A8.net管理画面にログイン
2. [ ] パラメータ計測レポート画面に移動
3. [ ] メニューパス: `_________________________`

**3-2. フィルタリング設定**
1. [ ] `id1=test_20250104_win2` で絞り込み
2. [ ] 対象期間を設定: `_____ ～ _____`
3. [ ] 検索実行

**3-3. 表示内容の確認**
- [ ] ✅ id1付き成果が表示された
- [ ] ❌ 表示されなかった

**表示された場合、以下の情報を記録:**

| 表示項目 | 内容 | 備考 |
|---------|------|------|
| 成果発生日時 |  |  |
| プログラム名 |  |  |
| id1パラメータ |  |  |
| 報酬額 |  |  |
| 承認状況 |  |  |
| その他の列 |  |  |

**スクリーンショット:**
- レポート画面全体: [保存場所]
- フィルタリング設定: [保存場所]

**結果メモ:**
```
[表示内容、気づいた点、疑問点を記録]




```

---

### ステップ4: CSV出力機能の確認 ⭐ **最重要**

**目的:** パラメータ計測レポートからCSV/Excel形式でデータをエクスポートできるか確認

**操作手順:**

**4-1. エクスポートボタンの探索**
1. [ ] レポート画面で「CSV出力」「CSVダウンロード」ボタンを探す
2. [ ] 「Excelダウンロード」「エクスポート」ボタンを探す
3. [ ] その他のデータ出力機能を探す

**結果:**
- [ ] ✅ CSV出力機能が見つかった（ボタン名: `_____________`）
- [ ] ⚠️ 別の形式の出力機能が見つかった（形式: `_____________`）
- [ ] ❌ エクスポート機能が見つからなかった

**4-2. CSV/Excelのダウンロード（見つかった場合）**
1. [ ] エクスポート機能を実行
2. [ ] ダウンロードされたファイル名: `_________________________`
3. [ ] ファイル形式: [ ] CSV  [ ] Excel  [ ] その他: `_____________`
4. [ ] ファイルサイズ: `_________` KB
5. [ ] ダウンロード日時: `YYYY-MM-DD HH:MM`

**4-3. CSV/Excelファイルの内容確認**
1. [ ] ファイルを開く
2. [ ] **id1列が存在するか確認 ⭐ 最重要**
3. [ ] id1列の値が正しく記録されているか確認

**CSV列構成（全カラムを記録）:**
```
列番号 | 列名            | サンプル値
-------|----------------|------------------------
1      | [列名]         | [サンプル値]
2      | [列名]         | [サンプル値]
3      | id1            | test_20250104_win2  ← この列が存在するか？
...
```

**CSV実サンプル（最初の3行）:**
```
[ここにCSVファイルの先頭3行をそのまま貼り付け]



```

**判定:**
- [ ] ✅ **CSV出力可能 & id1列あり → WIN×Ⅱで実装可能**
- [ ] ⚠️ CSV出力可能だがid1列なし → 別の列を確認
- [ ] ❌ CSV出力機能なし → A8.net統合は不可

**結果メモ:**
```
[CSVの詳細、気づいた点、WIN×Ⅱで使えるか否かの判断を記録]




```

---

### ステップ5: 利用規約・ポリシー確認 ⚠️ **リスク評価**


**5-1. 公式ドキュメントの確認**

**パラメータ計測ガイドの制限事項:**
- [ ] 「ポイントサイト向けではない」という記載を再確認
- [ ] その他の制限事項: `_________________________`

**A8.net利用規約の確認:**
1. [ ] A8.net利用規約を読む (https://www.a8.net/rule.html)
3. [ ] 関連する条項番号: `第___条`
4. [ ] 内容サマリ: `_________________________`

**5-2. リスク評価**

**ポイントサイト制限の解釈:**
```
[公式記載の「ポイントサイト向けではない」が、
 自身の解釈とリスク評価を記録]




```

**利用規約違反のリスク:**
- [ ] 低リスク（明確な違反ではない）
- [ ] 中リスク（グレーゾーン）
- [ ] 高リスク（明確な違反の可能性）

**推奨アクション:**
- [ ] A8.netサポートに事前確認する（推奨）
- [ ] 法務・コンプライアンス部門に相談
- [ ] リスクを受け入れて実装を進める
- [ ] A8.net統合を見送る

**結果メモ:**
```
[リスク評価の根拠、判断理由を詳細に記録]




```

---

### ステップ6: A8.netサポートへの問い合わせ（オプション）

**目的:** 公式見解を取得し、リスクを最小化

**実施判断:**
- [ ] 実施する（ステップ4でCSV出力が確認できた場合のみ推奨）
- [ ] 実施しない（理由: `_________________________`）

**6-1. 問い合わせ内容の準備**

**質問1: CSV出力機能**
```
件名: パラメータ計測レポートのCSV出力について

お世話になっております。メディア会員の[氏名]です。

パラメータ計測機能を利用しており、id1～id5パラメータで
成果データをトラッキングしております。

パラメータ計測レポート画面で確認できる成果データを
CSV形式でエクスポートする方法をご教示いただけますでしょうか。

よろしくお願いいたします。
```

```

お世話になっております。メディア会員の[氏名]です。

弊社では、会員様に対してアフィリエイト報酬の一部を

パラメータ計測機能のガイドに「ポイントサイト向けではない」
含まれますでしょうか。

A8.net利用規約に抵触しないか事前にご確認いただきたく、
ご教示いただけますと幸いです。

よろしくお願いいたします。
```

**6-2. 問い合わせの実施**
- [ ] 問い合わせを送信
- [ ] 送信日時: `YYYY-MM-DD HH:MM`
- [ ] 問い合わせ番号/参照番号: `_________________________`

**6-3. A8.netからの回答**
- [ ] 回答受領
- [ ] 回答日時: `YYYY-MM-DD HH:MM`
- [ ] 回答者: `_________________________`

**回答内容（全文記録）:**
```
[A8.netサポートからの回答をそのまま記録]




```

**回答のサマリ:**
- CSV出力について: [ ] 可能  [ ] 不可  [ ] 条件付き

**結果メモ:**
```
[回答の解釈、次のアクションを記録]




```

---

## 📊 検証結果サマリ

**検証実施日:** `YYYY-MM-DD`
**検証完了日:** `YYYY-MM-DD`

### 総合評価

**技術的実現性:**
- [ ] ✅ **実装可能** - id1付きCSVが取得できる
- [ ] ⚠️ **部分的に可能** - 制限あり（詳細: `_____________`）
- [ ] ❌ **実装不可** - CSV出力なし、またはid1が含まれない

**規約適合性:**
- [ ] ✅ **問題なし** - A8.netサポートから承認取得
- [ ] ⚠️ **グレーゾーン** - 公式見解なし、リスク管理が必要
- [ ] ❌ **規約違反のリスク** - 実装を見送るべき

**総合判断:**
- [ ] ✅ **A8.net統合を進める** → シナリオA
- [ ] ⚠️ **条件付きで進める** → シナリオB（詳細: `_____________`）
- [ ] ❌ **A8.net統合を見送る** → シナリオC

---

## 🎯 次のアクションプラン

### シナリオA: ✅ A8.net統合を進める

**前提条件:**
- id1付きCSV出力が確認できた
- 規約違反のリスクが低い、またはA8.netサポートから承認を得た

**実施タスク:**
1. [ ] `docs/asp-api-integration.md`を更新（実装可能に変更）
2. [ ] CSV取得手順書を作成 (`docs/operations/a8-csv-download-guide.md`)
3. [ ] GAS処理ロジックにA8.net成果データ取込を追加
4. [ ] 案件マスタにA8.net案件を追加
5. [ ] テスト運用を開始（小規模）

**タイムライン:** 1-2日

---

### シナリオB: ⚠️ 条件付きで進める

**前提条件:**
- CSV出力は可能だが、何らかの制限がある
- または、規約適合性が不明確

**実施タスク:**
1. [ ] 制限事項をドキュメント化
2. [ ] リスク管理計画を作成
3. [ ] 段階的なロールアウト計画を策定
4. [ ] 定期的なモニタリング体制を構築

**タイムライン:** 3-5日

---

### シナリオC: ❌ A8.net統合を見送る

**前提条件:**
- CSV出力機能がない、またはid1が含まれない
- 規約違反のリスクが高い

**実施タスク:**
1. [ ] `docs/asp-api-integration.md`を更新（実装不可を確定）
2. [ ] AFB統合を優先して進める
4. [ ] 代替ASPの調査（もしも、バリューコマース）

**タイムライン:** 追加作業なし

---

## 📝 補足資料

### 参考リンク

- **A8.net公式サポート:** https://support.a8.net/a8/as/faq/manual/
- **パラメータ計測ガイド:** https://support.a8.net/a8/as/faq/manual/a8-parameter-guide.php
- **レポート使い方:** https://support.a8.net/a8/as/faq/manual/report.php
- **A8.net利用規約:** https://www.a8.net/rule.html

### 関連ドキュメント

- `docs/asp-api-integration.md` - ASP統合調査結果
- `docs/specs/google.md` - Google Sheets構造とGAS処理
- `CLAUDE.md` - プロジェクト要件定義

### スクリーンショット保存場所

```
docs/dev/screenshots/a8-verification/
├── 01-menu-structure.png
├── 02-parameter-tracking-report.png
├── 03-test-link.png
├── 04-conversion-result.png
├── 05-csv-export-button.png
└── 06-csv-contents.png
```

---

## 🔒 機密情報の取り扱い

**注意事項:**
- このドキュメントに記録された実際の案件名、報酬額、アカウント情報は機密情報です
- GitHubへのコミット前に、機密情報が含まれていないか確認してください
- 必要に応じて、検証結果のみを残し、詳細データは別途管理してください

---

**Document Status:** Draft - Awaiting Verification
**Last Updated:** 2025-01-04

---

## Step4: CSV/Excelダウンロード検証テンプレート（詳細手順）

以下は、CSV/Excelダウンロード機能とid1カラム確認に特化した詳細な検証テンプレートです。上記ステップの継続として使用し、検証ログを追記してください。

### 検証日時テンプレート
- **検証日**: 2025-01-08
- **検証者**: [記入してください]
- **検証環境**: A8.net Media Console (https://media-console.a8.net/report/parameter#)

### CSV/Excel検証手順

1. **A8.net管理画面アクセス**
   - https://px.a8.net/a8v2/asLogin.do にアクセス
   - 認証情報は `docs/specs/asp.md` を参照
   - `https://media-console.a8.net/report/parameter#` に移動

2. **CSV/Excelダウンロード**
   - 期間指定: **2025年11月1日〜11月8日**（例）
   - 必要に応じてサイト/プログラム/素材ID/素材タイプを絞り込む
   - パラメータ欄に確認したい値を入力し「絞り込む」
   - 画面下部のダウンロードボタンからCSV/Excelを取得

3. **ファイル確認項目**
   - ダウンロードボタン位置とファイル形式（CSV / Excel / その他）
   - 全カラム名と並び順
   - 重要カラム：`id1` の有無とサンプル値
   - オプション確認：`eventId` カラムの有無
   - サンプルデータ（ヘッダー+3〜5行）を記録

### 検証結果テンプレート

#### カラム構成
```
[カラム名をカンマ区切りまたは改行で記載]
```

#### id1カラム
- [ ] ✅ **存在する**
- [ ] ❌ **存在しない**

サンプル:
```
id1
550e8400-e29b-41d4-a716-446655440000
guest:660e9511-f30c-52e5-b827-557766551111
```

#### eventIdカラム
- [ ] 存在する
- [ ] 存在しない
- [ ] 未確認

#### サンプルCSV
```csv
日付,プログラム名,素材ID,クリック数,成果数,id1,eventId
2025-11-01,プログラムA,12345,10,2,550e8400-e29b-41d4-a716-446655440000,770f9622-g41d-63f6-c938-668877662222
2025-11-02,プログラムB,67890,5,1,guest:660e9511-f30c-52e5-b827-557766551111,881g0733-h52e-74g7-d049-779988773333
```

### 判定テンプレート

#### ✅ Case A: id1カラムあり
- 次のアクション
  1. 運用マニュアル作成 (`docs/operations/a8-csv-daily-workflow.md`)
  2. ポリシーリスク評価（A8.netサポートへの事前確認含む）
  3. テスト運用開始（1〜2週間モニタリング）

#### ❌ Case B: id1カラムなし
- 次のアクション
  1. A8.net案件は集計用としてのみ扱う
  2. 代替ASP（もしも / バリューコマース / AFB再実装）の調査
  3. 関連ドキュメント更新（`docs/asp-api-integration.md` など）

### 選択アクション記入欄
```
ケース: [Case A / Case B]
選択理由: [記入]
担当者: [記入]
期限: [記入]
```

### チェックリスト
- [ ] 管理画面ログイン済み
- [ ] レポート画面アクセス済み
- [ ] CSV/Excelダウンロード済み
- [ ] カラム名記録済み
- [ ] id1確認済み
- [ ] サンプルデータ記録済み
- [ ] 次アクション決定済み
- [ ] 関連ドキュメント/Issue更新済み

> このテンプレートは、Step4の検証を確実に完了させるための詳細手順です。表形式ログと合わせて運用してください。